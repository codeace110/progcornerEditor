<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kodebreakers</title>
    <script src="https://apis.google.com/js/api.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Figtree:400,600&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0-beta1/css/bootstrap.min.css"
        rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/codemirror.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/theme/dracula.min.css" rel="stylesheet">
    <link rel="stylesheet" href="index.css">
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.8/firebase-firestore.js"></script>


</head>

<body>
    <div class="top-container">
        <h1>Welcome to Kodebreakers!</h1>
        <button id="theme-toggle" class="btn">Toggle Theme</button>
        <div class="row">
            <div class="col-md-6">
                <h2>Code Editor</h2>
                <p>Enter your code in the editor below, then click the "Run" button to see the output.</p>

            </div>
            <div class="col">
                <h2>Output</h2>
                <p>The output of your code will appear in the area below.</p>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row">
            <div class="col-md-6">
                <form onsubmit="return searchVideos(event);">
                    <input type="text" id="search-input" placeholder="Search YouTube">
                    <button type="submit">Search</button>
                </form>

                <div id="video-container">
                    <iframe width="790" height="444" src="https://www.youtube.com/embed/W6NZfCO5SIk"
                        title="JavaScript Tutorial for Beginners: Learn JavaScript in 1 Hour" frameborder="0"
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                        allowfullscreen></iframe>
                </div>
                

            </div>
            <div class="col">
                <div class="output-container">
                    <div id="output-container">Output will Display here!</div>
                    <div id="log-container" style="display: none;"></div>
                </div>
                <div class="container text-center">
                    <div class="row align-items-start">
                        <div class="col">
                            <button onclick="runCode()" class="btn">
                                <h1>RUN</h1>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="editor-container">
                    <textarea id="editor"></textarea>
                </div>
            </div>

        </div>
    </div>

    <!-- Firebase SDK -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.62.2/addon/edit/closebrackets.min.js"></script>
    <script src="code.js"></script>
    <script src="index.js"></script>

    <script>

        const firebaseConfig = {
            apiKey: "AIzaSyASHm4DHXPNiem2nl25_Ax8jHHXRSVYC7A",
            authDomain: "programmerscornerph-2f1f9.firebaseapp.com",
            databaseURL: "https://programmerscornerph-2f1f9-default-rtdb.firebaseio.com",
            projectId: "programmerscornerph-2f1f9",
            storageBucket: "programmerscornerph-2f1f9.appspot.com",
            messagingSenderId: "1090743775951",
            appId: "1:1090743775951:web:fb6d67af58b66fbfd8bdba",
            measurementId: "G-BT751SCDZ2"
        };
        firebase.initializeApp(firebaseConfig);

        // Initialize Firestore
        const db = firebase.firestore();

        function searchVideos(event) {
            event.preventDefault(); // prevent default form submission

            const searchKeyword = document.getElementById('search-input').value;

            // Get a reference to the videos collection
            const videosRef = db.collection('videos').doc('javascript');

            // Retrieve the data from Firestore
            videosRef.get().then((doc) => {
                if (doc.exists) {
                    // Get the video URL based on the search keyword
                    const videoUrl = doc.data()[searchKeyword.toLowerCase()];
                    if (videoUrl) {
                        // Update the video container with the retrieved URL
                        const videoContainer = document.getElementById('video-container');
                        videoContainer.innerHTML = `
                        <iframe width="790" height="444" src="${videoUrl}"
                            title="${searchKeyword}" frameborder="0"
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                            allowfullscreen></iframe>
                    `;
                    } else {
                        // If the search keyword is not found, display an error message
                        const outputContainer = document.getElementById('output-container');
                        outputContainer.innerText = `No video found for "${searchKeyword}".`;
                    }
                } else {
                    // If the videos collection does not exist, display an error message
                    const outputContainer = document.getElementById('output-container');
                    outputContainer.innerText = 'Unable to retrieve video data.';
                }
            }).catch((error) => {
                // If an error occurs, display the error message
                const outputContainer = document.getElementById('output-container');
                outputContainer.innerText = error.message;
            });
        }


    </script>


</body>

</html>